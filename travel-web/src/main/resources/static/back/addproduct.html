<link rel="stylesheet" href="css/easyui.css" />
<link rel="stylesheet" href="css/icon.css" />
<style>
 .yc_add li{
 	width:400px;
 	margin-top:20px;
 	list-style-type:none;
 }
 
 .yc_add li label{
 	display:inline-block;
 	width:10=50px;
 	text-align:right;
 }
 
 .yc_add li input{
 	width:200px;
 }
</style>
<div class="product">
	<form id="addproduct">
		<ul class="yc_add">
			<li><label>类 型:</label><input id="type" class="easyui-combobox"></li>
			<li><label>名 称:</label><input id="pname" class="easyui-textbox" ></li>
			<li><label>价 格:</label><input id="price" class="easyui-numberbox" ></li>
			<li><label>商品库存:</label><input id="balance" class="easyui-numberbox" data-options="min:0"></li>
			<li><label>介 绍:</label><textarea id="intro"></textarea></li>
			<li><label>公 司 名:</label><textarea id="company"></textarea></li>
			<li><label>图 片:</label><input id="pic" type="file" name="pic"></li>
			<li><label></label><a class="easyui-linkbutton" href="javascript:add()">添加</a></li>
		</ul>
	</form>
</div>
<script type="text/javascript" src="js/jquery.min.js" ></script>
<script type="text/javascript" src="js/jquery.easyui.min.js" ></script>
<!--语言支持  简体中文-->
<script type="text/javascript" src="js/easyui-lang-zh_CN.js" ></script>
<!-- 引入ajaxFileUpload -->
<script type="text/javascript" src="js/ajaxfileupload.js"></script>
<script>
//加载数据   获取商品类型   back/manager/xx
$('#type').combobox({
	url:'../travel/type/findAll',
	valueField:'tno',
	textField:'tname'
});

//添加商品
function add(){
	console.info("data")
	//获取所有元素值
	var tno=$('#type').val();
	var pname=$('#pname').val();
	var price=$('#price').val();
	var balance=$('#balance').val();
	var company=$('#company').val();
	var intro=$('#intro').val();
	var pic=$('#pic').val();
	$.ajaxFileUpload({
		url:'../travel/product/create?pname='+pname+'&tno=5&price='+price+'&balance='
		+balance+'&company='+company+'&intro='+intro+'&pic='+pic,
		secureuri:false,
		fileElementId:'pic',
		dataType:'json',
		//data:{tno:tno,pname:pname,price:price,balance:balance,company:company,intro:intro},
		success:function(data){
			console.info(data)
			if(data>0){
				tno='';
				pname='';
				price='';
				balance='';
				company='';
				intro='';
				//清空文本框
				$.messager.show({
					title:'温馨提示',
					msg:'添加成功',
					timeout:5000,
					showType:'slide'
				});
			}else{
				$.messager.alert('警告','商品添加失败');
			}
		}
	});
}
</script>